<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-icon
        routerLink="/tabsKids/accueil"
        color="light"
        name="chevron-back-outline"
      ></ion-icon>
    </ion-buttons>
    <ion-buttons slot="end" *ngIf="checkSelf===true">
      <ion-button color="secondary" (click)="presentPopover($event)">
        <ion-icon
          style="color: white"
          slot="icon-only"
          ios="ellipsis-horizontal"
          md="ellipsis-vertical"
        >
        </ion-icon>
      </ion-button>
    </ion-buttons>

    <ion-buttons slot="end" *ngIf="checkSelf!==true">
      <ion-button
        shape="rounded"
        (click)="presentPopoverNewMsg($event,idprofilePassed)"
      >
        <ion-icon color="light" name="chevron-down-outline"></ion-icon>
      </ion-button>
    </ion-buttons>

    <ion-title color="light" style="text-align: center; margin-left: 20xp">
      {{title}}</ion-title
    >
  </ion-toolbar>
</ion-header>
<ion-content
  class="parent"
  [scrollEvents]="true"
  (ionScroll)="logScrolling($event)">

  <div class="image1">
    <ion-img
      class="imgUser"
      src="https://www.heysigmund.com/wp-content/uploads/Breaking-Up-With-Kids-The-New-Normal.jpg"
    ></ion-img>

    <ion-avatar class="image2">
      <img [src]="apiImgUser +user?.photo"  class="myImageUser" />

      <ion-label color="light" style="white-space: pre">
        {{user?.name}}</ion-label
      >
    </ion-avatar>
  </div>
  <ion-row>
    <ion-col size="1"></ion-col>
    <ion-col size="3">
      <ion-label class="mylabelabonnement"> 2k Abonnes </ion-label>
    </ion-col>
    <ion-col size="2"></ion-col>
    <ion-col size="4">
      <ion-label class="mylabelabonnement"> 500 abonnements </ion-label>
    </ion-col>
    <ion-col size="1"></ion-col>
  </ion-row>

  <div style="background-color: #f8f8f8">
    <!-- Segment with default selection -->
    <ion-segment (ionChange)="segmentChanged($event)" value="photo">
      <ion-segment-button value="photo">
        <ion-label style="font-family: 'Leckerli One', cursive"
          >Photo</ion-label
        >
      </ion-segment-button>
      <ion-segment-button value="Publications">
        <ion-label style="font-family: 'Leckerli One', cursive"
          >Publications</ion-label
        >
      </ion-segment-button>
      <ion-segment-button value="Planning">
        <ion-label style="font-family: 'Leckerli One', cursive"
          >Planning</ion-label
        >
      </ion-segment-button>
      <ion-segment-button value="propos">
        <ion-label style="font-family: 'Leckerli One', cursive"
          >Ã  propos</ion-label
        >
      </ion-segment-button>
    </ion-segment>

    <!-- <div class="body" *ngIf="selected==='photo'">

      <div *ngIf="this.postsimg.length===1">

        <div id="first-bloc">
          <div id="first-photo"
            style="position: relative"
            *ngFor="let file of ResWithOneimg"          >
            <div class="left-tape-first"></div>
            <div class="right-tape-first"></div>
            <ng-container *ngIf="getExt(file.file_name) === 'png'||getExt(file.file_name) === 'jpeg||getExt(file.file_name) === 'jpg''">
              <div
                style="width: 250px; height: 200px"
                [style.background-size]="'cover'"
                [style.background-image]="'url(' + apiImg + file?.file_name + ')'"
                [lazyLoad]="apiImg + file?.file_name"
                errorImage="../../../assets/imgs/150.png"
                (click)="displayContentPhotoTab(file?.file_name)"
              >
                <ion-icon></ion-icon>
              </div>
            </ng-container>
            <ng-container *ngIf="getExt(file.file_name) === 'mp4'">
              <div
                [style.background-size]="'cover'"
                [style.background-image]="'url(../../../assets/imgs/150.png)'"
                errorImage="../../../assets/imgs/150.png"
                (click)="displayVideo(file)"
              >
                <ion-icon
                  style="height: 50px; width: 50px"
                  name="videocam"
                ></ion-icon>
              </div>
            </ng-container>
          </div>
        </div>
      </div>
    </div>


    <div *ngIf="this.postsimg.length>=1&&this.postsimg.length<6">
      
      <div id="first-bloc" >
        <div id="first-photo" style="position: relative"  *ngFor="let file of ResWithOneimg" >
          <div class="left-tape-first"></div>
          <div class="right-tape-first"></div>
          <ng-container *ngIf="getExt(file.file_name) === 'png'">
            <div style="  
            height: 200px;"  [style.background-size]="'cover'"
              [style.background-image]="'url(' + apiImg + file?.file_name + ')'" [lazyLoad]="apiImg + file?.file_name"
              errorImage="../../../assets/imgs/150.png" (click)="displayContentPhotoTab(file?.file_name)" >
              <ion-icon></ion-icon>
            </div>
          </ng-container>
          <ng-container *ngIf="getExt(file.file_name) === 'mp4'">
            <div  [style.background-size]="'cover'" [style.background-image]="'url(../../../assets/imgs/150.png)'"
              errorImage="../../../assets/imgs/150.png" (click)="displayVideo(file)">
              <ion-icon style="height: 50px; width: 50px" name="videocam"></ion-icon>
            </div>
          </ng-container>
        </div>
        <div id="photo-set-one">
          <div class="fourPics" style="position: relative"  *ngFor="let file of ResWithTwoimg" >
            <div class="left-tape-second"></div>
            <div class="right-tape-second"></div>
            <ng-container *ngIf="getExt(file.file_name) === 'png'">
              <div style="  
              height: 100px;"  [style.background-size]="'cover'"
                [style.background-image]="'url(' + apiImg + file?.file_name + ')'" [lazyLoad]="apiImg + file?.file_name"
                errorImage="../../../assets/imgs/150.png" (click)="displayContentPhotoTab(file?.file_name)" >
                <ion-icon></ion-icon>
              </div>
            </ng-container>
            <ng-container *ngIf="getExt(file.file_name) === 'mp4'">
              <div  [style.background-size]="'cover'" [style.background-image]="'url(../../../assets/imgs/150.png)'"
                errorImage="../../../assets/imgs/150.png" (click)="displayVideo(file)">
                <ion-icon style="height: 50px; width: 50px" name="videocam"></ion-icon>
              </div>
            </ng-container>
          </div>
         
        </div>
     
      </div>


    </div>

    <div *ngIf="this.postsimg.length>5">
      
      <div id="first-bloc" >
        <div id="first-photo" style="position: relative"  *ngFor="let file of ResWithOneimg" >
          <div class="left-tape-first"></div>
          <div class="right-tape-first"></div>

          <ng-container *ngIf="getExt(file.file_name) === 'png'">
            <div style="  
            height: 200px;"  [style.background-size]="'cover'"
              [style.background-image]="'url(' + apiImg + file?.file_name + ')'" [lazyLoad]="apiImg + file?.file_name"
              errorImage="../../../assets/imgs/150.png"  (click)="displayContentPhotoTab(file?.file_name)">
              <ion-icon></ion-icon>
            </div>
          </ng-container>
          <ng-container *ngIf="getExt(file.file_name) === 'mp4'">
            <div  [style.background-size]="'cover'" [style.background-image]="'url(../../../assets/imgs/150.png)'"
              errorImage="../../../assets/imgs/150.png" (click)="displayVideo(file)">
              <ion-icon style="height: 50px; width: 50px" name="videocam"></ion-icon>
            </div>
          </ng-container>
        </div>
        <div id="photo-set-one">
          <div class="fourPics" style="position: relative"  *ngFor="let file of ResWithTwoimg" >
            <div class="left-tape-second"></div>
            <div class="right-tape-second"></div>
            <ng-container *ngIf="getExt(file.file_name) === 'png'">
              <div style="  
              height: 100px;"  [style.background-size]="'cover'"
                [style.background-image]="'url(' + apiImg + file?.file_name + ')'" [lazyLoad]="apiImg + file?.file_name"
                errorImage="../../../assets/imgs/150.png" (click)="displayContentPhotoTab(file?.file_name)">
                <ion-icon></ion-icon>
              </div>
            </ng-container>
            <ng-container *ngIf="getExt(file.file_name) === 'mp4'">
              <div  [style.background-size]="'cover'" [style.background-image]="'url(../../../assets/imgs/150.png)'"
                errorImage="../../../assets/imgs/150.png" (click)="displayVideo(file)">
                <ion-icon style="height: 50px; width: 50px" name="videocam"></ion-icon>
              </div>
            </ng-container>
          </div>
         
        </div>

     
      </div>
    </div> -->

    <div class="body" *ngIf="selected==='photo'">
      <div id="first-bloc">
        <div id="first-photo" style="position: relative">
          <div class="left-tape-first"></div>
          <div class="right-tape-first"></div>
        </div>
        <div id="photo-set-one">
          <div class="fourPics" style="position: relative">
            <div class="left-tape-second"></div>
            <div class="right-tape-second"></div>
          </div>
          <div class="fourPics" style="position: relative">
            <div class="left-tape-fourth"></div>
            <div class="right-tape-fourth"></div>
          </div>
          <div class="fourPics" style="position: relative">
            <div class="left-tape-third"></div>
            <div class="right-tape-third"></div>
          </div>
          <div class="fourPics" style="position: relative">
            <div class="left-tape-second"></div>
            <div class="right-tape-second"></div>
          </div>
        </div>
      </div>
      <div id="photo-set-two">
        <div class="eightPic" style="position: relative">
          <div class="left-tape-second"></div>
          <div class="right-tape-second"></div>
        </div>
        <div class="eightPic" style="position: relative">
          <div class="left-tape-third"></div>
          <div class="right-tape-third"></div>
        </div>
        <div class="eightPic" style="position: relative">
          <div class="left-tape-second"></div>
          <div class="right-tape-second"></div>
        </div>
        <div class="eightPic" style="position: relative">
          <div class="left-tape-fourth"></div>
          <div class="right-tape-fourth"></div>
        </div>
        <div class="eightPic" style="position: relative">
          <div class="left-tape-fourth"></div>
          <div class="right-tape-fourth"></div>
        </div>
        <div class="eightPic" style="position: relative">
          <div class="left-tape-third"></div>
          <div class="right-tape-third"></div>
        </div>
        <div class="eightPic" style="position: relative">
          <div class="left-tape-second"></div>
          <div class="right-tape-second"></div>
        </div>
        <div class="eightPic" style="position: relative">
          <div class="left-tape-third"></div>
          <div class="right-tape-third"></div>
        </div>
      </div>
    </div>

    <div class="content-profil" *ngIf="selected==='propos'">
      <div>
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
          "
        >
          <h4>A propos</h4>
          <ion-icon
            (click)="updateComment()"
            style="color: green"
            name="create"
          ></ion-icon>
        </div>
      </div>
      <ng-container *ngIf="update;else noupdate">
        <textarea
          rows="5"
          cols="40"
          wrap="soft"
          style="margin: 10px 25px; resize: none; text-indent: -35px"
        >
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Beatae deserunt consequuntur mollitia cum soluta dolorem omnis quam totam.
          </textarea
        >
        <div style="display: flex; align-items: center; margin-bottom: 15px">
          <div>
            <ion-icon
              style="margin-right: 10px"
              name="location-sharp"
            ></ion-icon>
            <ion-label style="font-weight: bold">Adresse</ion-label>
          </div>
          <div>
            <input
              style="margin-left: 5px; width: 120px; text-align: center"
              class="commentaire"
              id="contentadresse"
              type="text"
              value="{{user.adresse}} 21 baker street"
            />
          </div>
          <div style="margin: 0 5px">
            <ion-label style="font-weight: bold">Code postal</ion-label>
          </div>
          <div>
            <input
              style="width: 55px; text-align: center"
              class="commentaire"
              id="contentPostal"
              type="text"
              value="2083"
            />
          </div>
        </div>

        <div
          style="
            display: flex;
            align-items: center;
            margin-left: 25px;
            margin-bottom: 10px;
          "
        >
          <div>
            <ion-label style="font-weight: bold">Ville</ion-label>
          </div>
          <div style="display: flex; align-items: center">
            <input
              style="
                margin-left: 5px;
                width: 100px;
                text-align: center;
                margin-right: 5px;
              "
              type="text"
              id="contentVille"
              value="{{user.ville}} Tunis"
            />
          </div>
          <div>
            <ion-label style="font-weight: bold">Pays</ion-label>
          </div>
          <div>
            <input
              style="
                margin-left: 5px;
                width: 100px;
                text-align: center;
                margin-right: 5px;
              "
              type="text"
              id="contentPays"
              value="{{user.location}} Tunisie"
            />
          </div>
        </div>

        <div style="display: flex; align-items: center">
          <ion-icon style="margin-right: 10px" name="calendar"></ion-icon>
          <div style="margin-right: 10px">
            <ion-label style="font-weight: bold">Date naissance</ion-label>
          </div>
          <div>
            <input
              class="commentaire"
              type="date"
              id="datenaissance"
              value="{{date}}"
            />
          </div>
        </div>
        <div style="display: flex; align-items: center">
          <ion-icon style="margin-right: 10px" name="school"></ion-icon>
          <p style="font-weight: bold; margin-right: 10px">
            Etablissement scolaire
          </p>
          <input type="text" value="SCHOOL" style="width: 130px" />
        </div>
        <div style="display: flex">
          <div style="margin-top: 15px; margin-right: 20px">
            <ion-label style="font-weight: bold">Genre</ion-label>
          </div>

          <ion-item>
            <ng-container *ngIf="user.sexe==='Homme';else Femme">
              <ion-select
                interface="popover"
                placeholder="Select One"
                value="Homme"
                [(ngModel)]="user.sexe"
              >
                <ion-select-option value="Femme">Femme</ion-select-option>
                <ion-select-option value="Homme">Homme</ion-select-option>
                <ion-select-option value="Autre">Autre</ion-select-option>
              </ion-select>
            </ng-container>

            <ng-template #Femme>
              <ion-select
                interface="popover"
                placeholder="Select One"
                value="Femme"
                [(ngModel)]="user.sexe"
              >
                <ion-select-option value="Femme">Femme</ion-select-option>
                <ion-select-option value="Homme">Homme</ion-select-option>
                <ion-select-option value="Autre">Autre</ion-select-option>
              </ion-select>
            </ng-template>
          </ion-item>
        </div>
        <div style="display: flex; justify-content: space-between">
          <div></div>
          <div style="margin: 15px">
            <ion-icon
              style="font-size: 30px; color: red"
              (click)="updateComment()"
              name="close-circle-outline"
            ></ion-icon>
            <ion-icon
              style="font-size: 30px; color: green"
              (click)="userUpdate()"
              name="checkmark-circle-outline"
            ></ion-icon>
          </div>
        </div>
      </ng-container>

      <ng-template #noupdate>
        <p style="margin: 10px 25px; text-align: left">
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Beatae
          deserunt consequuntur mollitia cum soluta dolorem omnis quam totam.
        </p>
        <div style="display: flex">
          <div style="display: flex; align-items: center; margin-right: 15px">
            <ion-icon
              style="margin-right: 10px"
              name="location-sharp"
            ></ion-icon>
            <ion-label style="font-weight: bold">Adresse</ion-label>
            <!-- <div>{{user.adresse}}</div> -->
            <p style="margin-left: 10px">21 baker street</p>
          </div>
          <div style="display: flex; align-items: center">
            <ion-label style="font-weight: bold">Code postal</ion-label>
            <p style="margin-left: 10px">2083</p>
          </div>
        </div>

        <div style="display: flex; margin-left: 25px">
          <div style="display: flex; align-items: center; margin-right: 15px">
            <ion-label style="font-weight: bold">Ville</ion-label>
            <!-- <div> {{user.ville}} </div> -->
            <p style="margin-left: 10px">Tunis</p>
          </div>
          <div style="display: flex; align-items: center">
            <ion-label style="font-weight: bold">Pays</ion-label>
            <p style="margin-left: 10px">Tunisie</p>
          </div>
          <div>{{user.pays}}</div>
        </div>
        <div style="display: flex; align-items: center">
          <ion-icon name="school"></ion-icon>
          <ion-label style="font-weight: bold; margin-left: 10px"
            >Etablissement scolaire</ion-label
          >
          <p style="margin-left: 10px">SCHOOL</p>
        </div>
        <div>
          <div style="display: flex; align-items: center">
            <ion-icon name="calendar"></ion-icon>
            <ion-label style="font-weight: bold; margin-left: 10px"
              >Date naissance</ion-label
            >
            <div>
              <ion-datetime
                class="commentaire"
                type="date"
                id="datenaissance"
                [(ngModel)]="user.datedenaissance"
              >
              </ion-datetime>
            </div>
          </div>
        </div>

        <div style="display: flex">
          <div style="margin-top: 15px; margin-left: 25px">
            <ion-label style="font-weight: bold">Genre</ion-label>
          </div>

          <p style="margin-left: 20px">{{user.sexe}}</p>
        </div>
      </ng-template>
    </div>

    <div *ngIf="selected==='Publications'">
      <div
        style="
          padding: 10px 5px;
          border-radius: 20px;
          margin: 5px;
          position: relative;
        "
        *ngFor="let post of postsStatut"
      >
        <div>
          <div style="display: flex; align-items: center">
            <ion-avatar style="margin: 5px 20px; width: 40px; height: 40px">
              <img [src]="apiImgUser +user?.photo" />
            </ion-avatar>

            <div style="display: flex; flex-direction: column">
              <ion-label style="font-weight: bold"
                >{{post.user.name}}</ion-label
              >
              <ion-label>{{post.createdAt| date}}</ion-label>
            </div>
            <p
              style="
                font-size: 30px;
                position: absolute;
                right: 60px;
                top: -30px;
              "
              (click)="presentPopover2($event)"
            >
              ...
            </p>
          </div>
          <div style="display: flex; flex-direction: column; margin-left: 65px">
            <ion-label style="font-weight: bold">{{post.title}}</ion-label>
            <ion-label>{{post.content}} </ion-label>
          </div>
        </div>
        <div
          style="
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 10px 0;
          "
        >
          <div style="display: flex; align-items: center">
            <ion-icon
              name="heart-outline"
              style="color: red; font-size: 30px; margin-right: 10px"
            ></ion-icon>
            Like
          </div>
          <div style="display: flex; align-items: center">
            <ion-icon
              name="chatbubble-ellipses-outline"
              style="font-size: 30px; margin-right: 10px"
            ></ion-icon>
            Comment
          </div>
        </div>
        <div id="main-content"></div>
      </div>
    </div>
  </div>
</ion-content>