<app-header title="Evennement" [isCommunityCreate]="true"></app-header>
<ion-content [scrollEvents]="true" (ionScroll)="logScrolling($event)">

  <div style="position: relative;">
    <img *ngIf="event?.cover" src="{{ apiImg+event?.cover}} " alt="">
    <img *ngIf="!event?.cover"
      src="https://images.fastcompany.net/image/upload/w_596,c_limit,q_auto:best,f_auto/wp-cms/uploads/2021/03/LinkedIn-Default-Background-2020-.jpg"
      alt="">
    <ion-avatar style="position:absolute; bottom:-40px; right:-30px" class="edit-profile-cover"
      (click)="selectImageSource()" *ngIf="event?.createdBy._id === userid">
      <ion-icon name="create" style="color:green;"> </ion-icon>
    </ion-avatar>
  </div>
  <div class="content">
    <div class="eventContent">
      <div class="buttons">
        <button color="white" style="
      box-shadow: 0px 3px 10px rgba(114, 114, 114, 0.452);
      border-radius: 10px;
      margin: 10px 0 0 10px;
      height: 30px;
      width: 80px;
      color: #898b8b;
      background: white" routerLink="/">
          message
        </button>
        <button color="white" style="
        width:120px;
        box-shadow: 0px 3px 10px rgba(114, 114, 114, 0.452);
        border-radius: 10px;
        height: 30px;
        color: #3b8c4f;
        font-weight: bold;
        margin: 10px 0 0 10px;
        background: white" *ngIf="!interrested" (click)="interest()">
          ça m'intéresse
        </button>
        <button style="
          width:120px;
          box-shadow: 0px 3px 10px rgba(114, 114, 114, 0.452);
          border-radius: 10px;
          margin: 10px 0 0 10px;
          height: 30px;
          color: white;
          font-weight: bold;
          background: #3b8c4f" *ngIf="interrested" (click)="notinterested()">
          intéréssé(e)
        </button>
      </div>
      <div  style="position:relative">
        <div (click)="openDropDown1()" (blur)="openDropDown1()" class="threePoints">
          <ion-icon class="button" name="ellipsis-horizontal"
            style="display: flex;justify-content:center;align-items:center;height:15px"></ion-icon>
        </div>
        <ng-container *ngIf="dropDown1">
          <div style="position: absolute;background-color:rgb(243, 243, 243);padding:15px;border-radius:15px;transform:translateX(-130px) translateY(10px);display:flex;flex-direction:column;
          width:150px;color:rgb(168, 168, 168);box-shadow:-5px 5px 10px rgb(113, 113, 113);">
            <span style="font-size: 13px;">Enregistrer</span>
            <ion-item (click)="getAllfriends()">
              <ion-label>Inviter des amis</ion-label>
              <ion-select [(ngModel)]="selectedFriends" multiple="true" ok-text="okey!" cancel-text="Nah">
                <ion-select-option *ngFor="let friend of friends" value="{{friend?.userFollowed._id}}">
                  {{friend?.userFollowed.name}}</ion-select-option>
              </ion-select>
            </ion-item>
            <span style="font-size: 13px;">Signaler l'évenement</span>
          </div>
        </ng-container>
      </div>
    </div>
    <ion-icon name="create" class="createIcom" *ngIf="event?.createdBy._id === userid"
    (click)="update === false ? update = true: update = false"></ion-icon>

    <div *ngIf="!update"  class="description">
      <h3> 300 Participants</h3>
      <div>
        <h6>Evennement de: &nbsp;</h6>
        <span> {{event?.activity}}</span>
      </div>
      <div>
        <h6>Lieu: &nbsp; </h6>
        <span> Adresse evennement</span>
      </div>
      <div>
        <h6>Date de début: &nbsp; </h6>
        <span> {{event?.startTime | date:'medium'}}</span>
      </div>
      <div>
        <h6>Date de fin: &nbsp; </h6>
        <span> {{event?.endTime | date:'medium' }}</span>
      </div>
      <div>
        <h6>Durée: &nbsp; </h6>
        <span> heures</span>
      </div>
      <div>
        <h6>Evennement public: &nbsp; </h6>
        <span *ngIf="event?.confidentiality === 'public'"> tout le monde peut participer</span>
        <span *ngIf="event?.confidentiality === 'private'"> cet évènnement est privé</span>

      </div>
      <div>
        <h6>Description: &nbsp; </h6>
        <span>{{event?.description}}</span>
      </div>
    </div>
    <div *ngIf="update"  class="description">
      <h3> 300 Participants</h3>
      <div>
        <h6>Evennement de: &nbsp;</h6>
        <input class="input" placeholder=" {{event?.activity}}" />
      </div>
      <div>
        <h6>Lieu: &nbsp; </h6>
        <input class="input" placeholder="Adresse evennement" />
      </div>
      <div>
        <h6>Date de début: &nbsp; </h6>
        <input class="input" type="date" placeholder="{{event?.startTime   | date:'medium'}}" />
      </div>
      <div>
        <h6>Date de fin: &nbsp; </h6>
        <input class="input" type="date" placeholder="{{event?.endTime   | date:'medium' }}" />
      </div>

      <div>
        <h6>Evennement public: &nbsp; </h6>
        <div (click)="openDropDown()" (blur)="openDropDown()"
          style="display: flex;flex-direction:column; align-items:flex-start;position:relative;border-radius:20px; width:70%; background-color: #F1F2F2;margin:5px;">
          <span style="margin-right:10px; color: #909890;  margin-left:10px">confidentialité</span>
          <div
            style="margin-left:15px; display:flex;align-items: center; justify-content:space-between;width: 90%; padding:5px">
            <div>
              <ng-container style="display: flex;align-items:center" *ngIf="public;else privacy">
                <img style="width:15px;height:15px; color:#8F978F" src="../../../assets/svg/globe.svg" alt="">
                <span style="color:#8F978F; font-weight:bold;">Public</span>
              </ng-container>
              <ng-template style="display: flex;align-items:center" #privacy>
                <img style="width:15px;height:15px; color:#8F978F" src="../../../assets/svg/lock.svg" alt="">
                <span style="color:#8F978F; font-weight:bold;">Private</span>
              </ng-template>
            </div>
            <div>
              <ng-container *ngIf="dropDown===false;else open">
                <ion-icon style="color:#8F978F" name="chevron-forward-outline"></ion-icon>
              </ng-container>
              <ng-template #open>
                <ion-icon style="color:#8F978F" name="chevron-down-outline"></ion-icon>
              </ng-template>
            </div>
          </div>
          <div *ngIf="dropDown===true;else close">
            <div style="position: absolute;padding:12px;width:250px; display:flex;flex-direction:column;z-index:10;background-color:white;
            box-shadow:-5px 5px 10px rgb(113, 113, 113);border-radius:10px;transform:translateX(20px) translateY(3px)">
              <div (click)="private = true; event.confidentiality = 'private';public=false;"
                style="display: flex;align-items:center;justify-content:space-between">
                <div style="display:flex;align-items:center;justify-content:space-between">
                  <img style="width:20px;height:20px;margin-right:5px" src="../../../assets/svg/lock.svg" alt="">
                  <div style="display: flex;flex-direction:column">
                    <span style="font-size: 14px; color:#8F978F">Private</span>
                    <span style="font-size: 10px;">Only invited people can see the event</span>
                  </div>
                </div>
                <ng-container *ngIf="private">
                  <img style="width:20px;height:20px" src="../../../assets/svg/check-privacy.svg" alt="">
                </ng-container>
              </div>
              <div (click)="public = true ; event.confidentiality = 'public'; private=false;"
                style="display: flex;align-items:center;justify-content:space-between">
                <div style="display:flex;align-items:center;justify-content:space-between">
                  <img style="width:20px;height:20px;margin-right:5px" src="../../../assets/svg/globe.svg" alt="">
                  <div style="display: flex;flex-direction:column">
                    <span style="font-size:14px;color:#8F978F">Public</span>
                    <span style="font-size: 10px;">Anyone can see the event</span>
                  </div>
                </div>
                <ng-container *ngIf="public">
                  <img style="width:20px;height:20px" src="../../../assets/svg/check-privacy.svg" alt="">
                </ng-container>
              </div>
            </div>
          </div>
          <ng-template #close>
            <div style="position: absolute;"></div>
          </ng-template>
        </div>
      </div>
      <div>
        <h6>Description: &nbsp; </h6>
        <input class="input" placeholder="{{event?.description}}"/>
      </div>
    </div>

  </div>

</ion-content>
